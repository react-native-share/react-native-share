"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[639],{9269:(e,i,t)=>{t.r(i),t.d(i,{assets:()=>d,contentTitle:()=>a,default:()=>m,frontMatter:()=>o,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"migrate-v4-to-v5","title":"Migrating to v5","description":"iOS","source":"@site/docs/migrate-v4-to-v5.mdx","sourceDirName":".","slug":"/migrate-v4-to-v5","permalink":"/react-native-share/docs/migrate-v4-to-v5","draft":false,"unlisted":false,"editUrl":"https://github.com/react-native-community/react-native-share/edit/master/website/docs/migrate-v4-to-v5.mdx","tags":[],"version":"current","frontMatter":{"id":"migrate-v4-to-v5","title":"Migrating to v5"},"sidebar":"someSidebar","previous":{"title":"Migrating to v4","permalink":"/react-native-share/docs/migrate-v3-to-v4"},"next":{"title":"Troubleshooting iOS","permalink":"/react-native-share/docs/troubleshooting-ios"}}');var n=t(4848),s=t(8453);const o={id:"migrate-v4-to-v5",title:"Migrating to v5"},a=void 0,d={},c=[{value:"iOS",id:"ios",level:2},{value:"Android",id:"android",level:2},{value:"Removal of WRITE_EXTERNAL_STORAGE permission request",id:"removal-of-write_external_storage-permission-request",level:3}];function l(e){const i={a:"a",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.h2,{id:"ios",children:"iOS"}),"\n",(0,n.jsxs)(i.p,{children:["No breaking changes ","\ud83d\ude0c"]}),"\n",(0,n.jsx)(i.h2,{id:"android",children:"Android"}),"\n",(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.a,{href:"https://github.com/react-native-community/react-native-share/issues/936",children:"v5 introduces a change"})," to remove the ",(0,n.jsx)(i.code,{children:"WRITE_EXTERNAL_STORAGE"})," permission from being automatically added to implementing apps."]}),"\n",(0,n.jsxs)(i.p,{children:["This is motivated by the Android 11 system enforcing new restrictions on storage, and mandating the use of scoped storage. If this impacts you, you should read more here to make sure your app will still work on Android 11: ",(0,n.jsx)(i.a,{href:"https://developer.android.com/about/versions/11/privacy/storage",children:"Scoped Storage restrictions"})]}),"\n",(0,n.jsx)(i.h3,{id:"removal-of-write_external_storage-permission-request",children:"Removal of WRITE_EXTERNAL_STORAGE permission request"}),"\n",(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.code,{children:"base64"})," file sharing requires the ",(0,n.jsx)(i.code,{children:"WRITE_EXTERNAL_STORAGE"})," permission to be included in the AndroidManifest.xml file. As ",(0,n.jsx)(i.code,{children:"WRITE_EXTERNAL_STORAGE"})," is seen as a ",(0,n.jsx)(i.a,{href:"https://developer.android.com/reference/android/Manifest.permission#WRITE_EXTERNAL_STORAGE",children:"dangerous"})," permission, it is now the responsibility of the implementing app to add this permission to their own AndroidManifest.xml file."]}),"\n",(0,n.jsx)(i.p,{children:"To do this, add:"}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{className:"language-xml",children:'\x3c!-- required for react-native-share base64 sharing --\x3e\n<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />\n'})}),"\n",(0,n.jsxs)(i.p,{children:["to your application's ",(0,n.jsx)(i.code,{children:"AndroidManifest.xml"})," file as per the example project."]})]})}function m(e={}){const{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,n.jsx)(i,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},8453:(e,i,t)=>{t.d(i,{R:()=>o,x:()=>a});var r=t(6540);const n={},s=r.createContext(n);function o(e){const i=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:o(e.components),r.createElement(s.Provider,{value:i},e.children)}}}]);