"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[64],{6241:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"share-remote-file","title":"Share Remote PDF file","description":"When sharing a pdf file with base64, there are two current problems.","source":"@site/docs/share-remote-file.mdx","sourceDirName":".","slug":"/share-remote-file","permalink":"/react-native-share/docs/share-remote-file","draft":false,"unlisted":false,"editUrl":"https://github.com/react-native-community/react-native-share/edit/master/website/docs/share-remote-file.mdx","tags":[],"version":"current","frontMatter":{"id":"share-remote-file","title":"Share Remote PDF file"},"sidebar":"someSidebar","previous":{"title":"Testing","permalink":"/react-native-share/docs/testing"},"next":{"title":"Migrating to v4","permalink":"/react-native-share/docs/migrate-v3-to-v4"}}');var r=t(4848),a=t(8453);const o={id:"share-remote-file",title:"Share Remote PDF file"},s=void 0,l={},c=[];function h(e){const n={code:"code",li:"li",ol:"ol",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"When sharing a pdf file with base64, there are two current problems."}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"On WhatsApp base64 wont be recognized => nothing to share"}),"\n",(0,r.jsx)(n.li,{children:"In the GmailApp the file extension is wrong (.dat)."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:'Therefore we use this "workaround" in order to handle pdf sharing for iOS Apps to mentioned Apps'}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Install react-native-fetch-blob"}),"\n",(0,r.jsx)(n.li,{children:"Set a specific path in the RNFetchBlob configurations"}),"\n",(0,r.jsx)(n.li,{children:"Download the PDF file to temp device storage"}),"\n",(0,r.jsx)(n.li,{children:"Share the response's path() of the downloaded file directly"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Code:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:"static sharePDFWithIOS(fileUrl, type) {\n  let filePath = null;\n  let file_url_length = fileUrl.length;\n  const configOptions = {\n    fileCache: true,\n    path:\n      DIRS.DocumentDir + (type === 'application/pdf' ? '/SomeFileName.pdf' : '/SomeFileName.png') // no difference when using jpeg / jpg / png /\n  };\n  RNFetchBlob.config(configOptions)\n    .fetch('GET', fileUrl)\n    .then(async resp => {\n      filePath = resp.path();\n      let options = {\n        type: type,\n        url: filePath // (Platform.OS === 'android' ? 'file://' + filePath)\n      };\n      await Share.open(options);\n      // remove the image or pdf from device's storage\n      await RNFS.unlink(filePath);\n    });\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"Nothing to do on Android. You can share the pdf file with base64"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:"static sharePDFWithAndroid(fileUrl, type) {\n  let filePath = null;\n  let file_url_length = fileUrl.length;\n  const configOptions = { fileCache: true };\n  RNFetchBlob.config(configOptions)\n    .fetch('GET', fileUrl)\n    .then(resp => {\n      filePath = resp.path();\n      return resp.readFile('base64');\n    })\n    .then(async base64Data => {\n      base64Data = `data:${type};base64,` + base64Data;\n      await Share.open({ url: base64Data });\n      // remove the image or pdf from device's storage\n      await RNFS.unlink(filePath);\n    });\n}\n"})})]})}function d(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>s});var i=t(6540);const r={},a=i.createContext(r);function o(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);